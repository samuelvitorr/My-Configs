##### =========================
##### Prefix
##### =========================
set -g prefix C-s
unbind C-b
unbind r
bind r source-file ~/.tmux.conf \; display-message "üåÄ Configura√ß√£o do TMUX recarregada..."

##### =========================
##### Terminal & Cores
##### =========================
set -g default-terminal "tmux-256color"
set -as terminal-overrides ",xterm-256color:RGB,*256col*:RGB"
set -as terminal-features ',xterm-kitty:allow-passthrough'
set -g allow-passthrough on
setw -g monitor-activity off
set -g visual-activity off

##### =========================
##### Plugin Manager (TPM)
##### =========================
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'catppuccin/tmux#v2.1.0'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

run '~/.tmux/plugins/tpm/tpm'

#set -g @plugin 'tmux-plugins/tmux-cpu'
#set -g @plugin 'tmux-plugins/tmux-battery'
#run ~/.config/tmux/plugins/tmux-plugins/tmux-cpu/cpu.tmux
#run ~/.config/tmux/plugins/tmux-plugins/tmux-battery/battery.tmux

##### =========================
##### Tema: Catppuccin Mocha (customizado + bubble)
##### =========================
# Tema base
set -g @catppuccin_flavour 'mocha'
set -g @catppuccin_status_modules 'none'  # evita conflitos com customiza√ß√£o manual

# Paleta personalizada (Mocha)
set -g @catppuccin_bg "#1e1e2e"
set -g @catppuccin_fg "#cdd6f4"
set -g @catppuccin_red "#f38ba8"
set -g @catppuccin_green "#a6e3a1"
set -g @catppuccin_yellow "#f9e2af"
set -g @catppuccin_blue "#89b4fa"
set -g @catppuccin_mauve "#cba6f7"
set -g @catppuccin_peach "#fab387"
set -g @catppuccin_overlay0 "#6c7086"

# Separadores estilo "bubble"
set -g @bubble_sep_left "ÓÇ∂"
set -g @bubble_sep_right "ÓÇ¥"

##### =========================
##### Mouse & Navega√ß√£o
##### =========================
set -g mouse on
set -g renumber-windows on
setw -g mode-keys vi

# Atalhos de movimenta√ß√£o entre panes
bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R

##### =========================
##### √çndice base das janelas/panes
##### =========================
set -g base-index 1
setw -g pane-base-index 1

##### =========================
##### Hist√≥rico & Atividade
##### =========================
set -g history-limit 10000
setw -g monitor-activity off
set -g visual-activity off

##### =========================
##### Copy Mode (Vi + Clipboard)
##### =========================
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "xclip -selection clipboard -in"

##### =========================
##### Barra de Status (Bubble Style corrigido)
##### =========================
set -g status on
set -g status-interval 5
set -g status-justify centre
set -g status-position bottom
set -g status-left-length 60
set -g status-right-length 150
set -g status-style "bg=#{@catppuccin_bg},fg=#{@catppuccin_fg}"
#set -g status-format[0] ""  # Linha vazia acima da barra

# Sess√£o (esquerda)
set -g status-left "#[fg=#{@catppuccin_blue},bg=#{@catppuccin_bg}]#[fg=#{@catppuccin_bg},bg=#{@catppuccin_blue},bold] #S #[fg=#{@catppuccin_blue},bg=#{@catppuccin_bg}]#{@bubble_sep_right}"

# Janelas (centro)
setw -g window-status-format "#[fg=#{@catppuccin_overlay0},bg=#{@catppuccin_bg}]#{@bubble_sep_left}#[fg=#{@catppuccin_bg},bg=#{@catppuccin_overlay0}] #I:#W #[fg=#{@catppuccin_overlay0},bg=#{@catppuccin_bg}]#{@bubble_sep_right}"
setw -g window-status-current-format "#[fg=#{@catppuccin_mauve},bg=#{@catppuccin_bg}]#{@bubble_sep_left}#[fg=#{@catppuccin_bg},bg=#{@catppuccin_mauve},bold] #I:#W #[fg=#{@catppuccin_mauve},bg=#{@catppuccin_bg}]#{@bubble_sep_right}"

# Data e hostname (direita)
set -g status-right "#[fg=#{@catppuccin_peach},bg=#{@catppuccin_bg}]#{@bubble_sep_left}#[fg=#{@catppuccin_bg},bg=#{@catppuccin_peach}] %Y-%m-%d %H:%M #[fg=#{@catppuccin_peach},bg=#{@catppuccin_bg}]#{@bubble_sep_right} #[fg=#{@catppuccin_blue},bg=#{@catppuccin_bg}]#{@bubble_sep_left}#[fg=#{@catppuccin_bg},bg=#{@catppuccin_blue}] #h #[fg=#{@catppuccin_blue},bg=#{@catppuccin_bg}]"

##### =========================
##### Bordas dos Panes
##### =========================
set -g pane-border-style "fg=#{@catppuccin_overlay0}"
set -g pane-active-border-style "fg=#{@catppuccin_blue}"

##### =========================
##### Mensagens
##### =========================
set -g message-style "bg=#{@catppuccin_bg},fg=#{@catppuccin_fg}"
set -g message-command-style "bg=#{@catppuccin_bg},fg=#{@catppuccin_fg}"

##### =========================
##### Tmux Continuum & Resurrect
##### =========================

set -g @continuum-restore 'on'
set -g @continuum-save-interval '5'

##### =========================
##### Switch de janela com FZF (Ctrl+l)
##### =========================
bind C-l run-shell "tmux list-window -a -F '#S:#I #W' | fzf --sync --reverse --prompt='Óûï  Janelas: ' | awk '{print \$1}' | xargs tmux switch-client -t"

